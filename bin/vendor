#!/usr/bin/env ruby
require "rubygems"

require "thor"
require "ripl"

require File.join(File.expand_path(File.dirname(__FILE__)), '..', 'lib', 'vendor_kit')
require File.join(File.expand_path(File.dirname(__FILE__)), '..', 'lib', 'vendor_kit', 'cli')

class VendorKit::App < Thor

  desc "console", "Load an interactive shell with the VendorKit classes loaded"
  def console
    # Need to clear the arguments otherwise they are passed through to RIPL
    ARGV.clear
    Ripl.start :binding => VendorKit::CLI.instance_eval{ binding }
  end

  desc "build MANIFEST_FILE", "Build a vendor package from a vendorspec file"
  def build(file)
    builder = VendorKit::Manifest::Builder.new(File.expand_path(file))
    if builder.build
      puts "Successfully built Vendor".green
      puts "Name: #{builder.name}"
      puts "Version: #{builder.version}"
      puts "File: #{builder.filename}"
    end
  end

end

VendorKit::App.start
